# 【实践记录】站在巨人的肩膀上 - 扩展包发布前的准备事项

文章编写于 2022年05月05日

## 站在巨人的肩膀上
曾经的时代，重复造轮子比比皆是。造轮子有助于自我能力的提升，不便于多项目管理。

自 [php](http://php.net/) 诞生 [composer 包管理器](https://getcomposer.org/)以来，我们可以站在巨人的肩膀上进行开发。由此 php 进入了一个飞速发展的时期。


## 扩展包开发
这里暂时不展开说明了。可以参考扩展阅读 [LX2 PHP 扩展包实战教程 - 从入门到发布](https://learnku.com/courses/creating-package?rf=6324)。如有不解之处，欢迎留言探讨。


## 门面工作
这是你的个人 IP 打造机会，正式用语，正确书写规范，完整的信息，完善的使用说明。各方面都认真对待。可以让阅读者对你印象加分。

故此：`README.md`、`composer.json`、`package.json` 信息，都要认真填写并好好对待。

因为：**人是视觉动物，我们可以不是，但我们不能要求别人不是**。

相关信息发布前后一定要反复审阅相关信息，避免出现下方情况。
![文章未反复审阅的反面教材][文章未反复审阅的反面教材]

扩展包发布后，需要自行引入验证，确保使用者能正常使用。问题是需要主动去发现，避免让用户来提出意见，增加他们的友好体验。


## 收尾发布

### 1. 上传至公开代码仓库源，添加扩展包维护者
**注意：正式场合正式用名，改大写的专有名词请保证正确的名称。如平时交流使用 mysql，正式文章使用 MySQL**

1. 完整的 composer.json 配置。
- 在 composer.json 中完善包信息，如 `keywords`, packagist SEO 搜索优化, `description` 扩展包描述，`authors` 作者信息。`authors.homepage` 是你的个人形象主页。`authors.role` 是你在这个包中的角色说明。
- 在 composer.json 中完善项目信息，如 `support.source`，`support.homepage`，`support.issues`

参考示例如下：
```
{
    "name": "jie-anthony/laravel-octane-workerman",
    "description": "Start the laravel project through gatewayworker to make the development of laravel in the Internet of Things more convenient. Fetch and communicate with different gateways via API.",
    "keywords": ["laravel-octane-workerman", "octane", "laravel", "workerman", "webman"],
    "type": "library",
    "license": "MIT",
    "authors": [
        {
            "name": "Anthony",
            "email": "407968526@qq.com",
            "homepage": "https://github.com/JieAnthony",
            "role": "Creator & Developer"
        },
        {
            "name": "mouyong",
            "email": "my24251325@gmail.com",
            "homepage": "https://github.com/mouyong",
            "role": "Creator & Developer"
        }
    ],
    "homepage": "https://laravel-workerman.iwnweb.com",
    "support": {
        "email": "my24251325@gmail.com",
        "source": "https://github.com/mouyong/laravel-octane-workerman",
        "issues": "https://laravel-workerman.iwnweb.com",
        "forum": "https://laravel-workerman.iwnweb.com",
        "wiki": "https://laravel-workerman.iwnweb.com"
    },
    <...>
}
```
2. 完善的 README 信息。
先列大纲，再补细节，由上到下。

`README.md` 务必填写，人家对你的印象来源之一。这是你打造个人 IP，积累小圈子的机会。

这里提供一份大纲参考。参考不一定适用于你，请自行决定是否增加或移除相关大纲。

```
包名
包徽章（完善好徽章，让使用者对你印象加分）

前往徽章页面获取自己的项目徽章：https://poser.pugx.org/#badges

[![Latest Stable Version](http://poser.pugx.org/jie-anthony/laravel-octane-workerman/v)](https://packagist.org/packages/jie-anthony/laravel-octane-workerman) [![Total Downloads](http://poser.pugx.org/jie-anthony/laravel-octane-workerman/downloads)](https://packagist.org/packages/jie-anthony/laravel-octane-workerman) [![Latest Unstable Version](http://poser.pugx.org/jie-anthony/laravel-octane-workerman/v/unstable)](https://packagist.org/packages/jie-anthony/laravel-octane-workerman) [![License](http://poser.pugx.org/jie-anthony/laravel-octane-workerman/license)](https://packagist.org/packages/jie-anthony/laravel-octane-workerman) [![PHP Version Require](http://poser.pugx.org/jie-anthony/laravel-octane-workerman/require/php)](https://packagist.org/packages/jie-anthony/laravel-octane-workerman)


## 介绍
这里是包的简介信息


## 前置要求
这里描述包的一些必要要求


## 安装
这里介绍如何安装扩展包


## 使用
这里介绍如何使用扩展包，务必填写，人家对你的印象来源之一。


## 协议
协议可以在项目目录下单独创建 `LICENSE` 文件，并将协议内容放置在 `LICENSE` 文件中。


## 开发者交流群
- 交流 QQ 群，创建 QQ 群，使用 QQ 群互联获取进群链接，以文字形式提供（不要以图片方式提供，免去图片上传、保存的麻烦）
- 不用每个项目单独建立 QQ 群，统一为一个交流群就好。前期积累小圈子是困难的。先聚集，再根据圈子来源细化。
- 查看加群链接：QQ 群 官网 https://qun.qq.com/join.html

示例： [开发者交流群](https://qm.qq.com/cgi-bin/qm/qr?k=gGezeVnF0yXZjkg_cmBjXojE__v38NbU&jump_from=webapi) ID: 650057913


## 备择方案
这里是和你的扩展包相类似的包。如果使用者有意了解，可以通过链接查看。

开源社区需要大家友好共建。如 [laravel-s](https://github.com/hhxsv5/laravel-s) 与 [laravel-swoole](https://github.com/swooletw/laravel-swoole) 在 `Alternatives` 所示。


## 感谢


## 其他
这里是一些你想留给阅读者的其他信息


```

3. 交流群、论坛。
4. 宣传，造势。


### 2. 发布至 packagist.org
登录 [packagist.org](https://packagist.org/login/)，打开[扩展包发布页](https://packagist.org/packages/submit)

输入扩展包的公开仓库地址，并点击提交

**注意: 扩展包的协议需要一定程度的公开，如 MIT、Apache2.0，不能使用 LGPL 的授权方式**

### 3. 添加 packagist.org 的扩展包包维护者，并开启项目的自动更新[扩展包详情页说明][扩展包详情页说明]
默认情况下，packagist.org 会通过 api 自动与项目完成相关的操作。会在代码库增加代码推送与合并的钩子。
如右下角未显示 `This package is auto-updated.` 请根据 packagist 指引文档进行配置。

自动更新是必要的配置，不要嫌麻烦，请确认配置完成。**方便他人的同时也是方便自己**。
配置好扩展包自动更新后，未来对扩展包如有改动，只需要推送到代码仓库，扩展包会自动完成更新。

介绍：
[packagist](packagist.org) 扩展包维护者，不同于 [GitHub](http://github.com/) 代码仓库维护者。

代码仓库维护者是可以对代码仓库进行管理的人员。
packagist 扩展包维护者是对 packagist 扩展包命名空间进行维护与管理的成员。

### 4. 统一头像标识，更新 Packagist.org 的作者头像
统一头像的好处是增加公共场合的 `个人 IP` 辨识度。大家看到你的头像后就知道了是大佬，曾经 `活跃于 xx 地方`，我过去有见到过。

大佬成长史是一步一步积累起来的，需要大佬在不断积累过程中，使用统一的高度辨识的特征，如昵称、名字、简介，头像。其中昵称、名字与头像辨识度最高，需要尽可能保证公开场合的高度统一。

1. 前往 [Gravatar 全球公认头像](https://en.gravatar.com/emails/) 完成注册，并完善基础信息。
2. 并在头像管理页添加自己的 packagist.org 邮箱。
3. 等待几分钟后，刷新刚发布的扩展包，确认头像是否已更新。

介绍：
[Gravatar 全球公认头像](http://cn.gravatar.org/) 是一项用于提供在全球范围内使用的头像服务。只要你在Gravatar的服务器上上传了你自己的头像，你便可以在其他任何支持 Gravatar 的博客、论坛等地方使用它。头像是与使用邮箱进行绑定的。可以为不同的公共场合使用不同的头像（需要在公共场合使用不同的邮箱账号）。

[Gravtar（中文访问地址）](http://cn.gravatar.org/) 是基于 [Wordpress](https://wordpress.com/)创建的。使用简单。

## 截图

![扩展包详情页说明][扩展包详情页说明]

## 扩展阅读

[StyleCI 编码风格修正服务](https://styleci.io/)
[Sentry 程序性能监控、错误收集服务](https://sentry.io/welcome/)
[Huntr 漏洞赏金平台](https://huntr.dev/)

[基于 Composer 的 PHP 模块化开发](https://learnku.com/articles/5333/modular-development-of-php-based-on-composer)
[手把手教你如何构建一个优秀的开源项目](https://learnku.com/articles/5265/how-to-build-an-open-source-project-that-breaks-thousands-of-star)
[LX2 PHP 扩展包实战教程 - 从入门到发布](https://learnku.com/courses/creating-package?rf=6324)

[12-factors](https://12factor.net/zh_cn/)
[约定式提交规范](https://www.conventionalcommits.org/zh-hans/v1.0.0/)
[语义化版本号](https://semver.org/lang/zh-CN/)
[中文排版规范](https://mubu.com/doc/_BORALLu-6#m)
[中文技术文档的写作规范](https://github.com/ruanyf/document-style-guide)
[中文文案排版指北](https://github.com/sparanoid/chinese-copywriting-guidelines)


[文章未反复审阅的反面教材]: https://laravel-workerman.qiniu.iwnweb.com/%E6%96%87%E7%AB%A0%E6%9C%AA%E5%8F%8D%E5%A4%8D%E5%AE%A1%E9%98%85%E7%9A%84%E5%8F%8D%E9%9D%A2%E6%95%99%E6%9D%90.png
[扩展包详情页说明]: https://laravel-workerman.qiniu.iwnweb.com/packagist%20%E5%8C%85%E8%AF%A6%E6%83%85%E9%A1%B5%E8%AF%B4%E6%98%8E.png

---
title: 二、部署一个应用
date: 2019-12-20 14:58:57
categories: k8s
tags:
  - k8s
  - 运维
english_title: Deploy-an-application
---
[前提摘要](https://kubernetes.io/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/)

**kubectl 常见使用格式是：`kubectl action resource`**

## kubectl 基础

1. 查看使用说明
`kubectl`

2. 查看命令帮助
在命令之后输入 `--help`，如：`kubectl get nodes --help`

3. 检查 kubectl 是否正确与集群交互
`kubectl version`

4. 查看集群中的节点信息
`kubectl get nodes`

## 部署应用

1. 创建部署
通过输入 `kubectl create deployment 部署名 --image=映像位置的完整地址` 进行部署。如：
`kubectl create deployment kubernetes-bootcamp --image=gcr.io/google-samples/kubernetes-bootcamp:v1`

命令将会做这些事：
- 找寻可用节点
- 安排应用在这些节点运行
- 将集群配置为在需要时在新节点上重新安排实例

2. 查看部署
`kubectl get deployments`

## 查看应用

默认情况下，应用只对节点与集群中的其他服务可见，在集群外的网络不可见。当我们使用 `kubectl` 命令时，我们通过一个 API 端点与应用程序进行交互。

kubectl 命令可以创建一个代理将通信转发到集群范围内的私有网络中。这个代理可以通过 Control-C 进行终止，并且在运行过程中不会有任何输出。

1. 创建代理
`kebuctl proxy`
我们现在在主机和 Kubernetes 集群之间建立了连接。代理允许从这些终端直接访问 API。

您可以看到通过代理端点承载的所有这些api。如，我们可以使用curl命令直接通过API查询版本：
`curl http://localhost:8001/version`

**如果 8001 端口不可访问，请确保 `kubectl proxy` 正在运行**
